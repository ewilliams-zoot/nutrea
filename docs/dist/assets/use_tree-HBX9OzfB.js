import{r as l}from"./index-BW-6nSPA.js";const W=({data:c,getId:v,getChildren:f,expandedState:n,onExpandedStateChange:C,onSelection:D,showRoot:m=!0,searchTerm:p,searchMatch:h,childSort:w})=>{const k=l.useRef({}),[P,R]=l.useState(c);P!==c&&(k.current={},R(c));const b=l.useCallback(e=>{let s;return v?s=v(e):s=e.id,s},[v]),y=l.useCallback(e=>{let s;return f?s=f(e):s=e.children,s},[f]),g=l.useCallback(e=>{const s=b(e);if(f&&k.current[s])return k.current[s];const r=y(e);return w&&r?.sort(w),f&&(k.current[s]=r),r},[b,y,w,f]),L=l.useCallback(e=>{C({...n,[e]:!n[e]})},[n,C]),u=l.useMemo(()=>{const e=[];let s=[];const r=(i,o=0,N)=>{const a=b(i),A={...i,id:a,level:o,parentId:N,toggleExpanded:()=>L(a),isExpanded:n[a],select:()=>D(i),isSelected:t=>t===a,hasChildren:!1};s.push(A),p?h&&h(i,p)?(s.forEach(t=>e.push(t)),s=[]):!h&&i.name.includes(p)&&(s.forEach(t=>e.push(t)),s=[]):e.push(A);const E=g(i);A.hasChildren=E!==void 0&&E.length>0,E!==void 0&&(n[a]||p)&&E.forEach(t=>r(t,o+1,a)),s.pop()};return m?r(c):g(c)?.forEach(o=>r(o,0,b(c))),e},[c,b,g,n,L,D,m,p,h]),K=l.useCallback((e,s)=>{e.preventDefault();const r=u[s];let i=s;switch(e.key){case"ArrowUp":s-1>=0&&(i=s-1);break;case"ArrowDown":s+1<u.length&&(i=s+1);break;case"ArrowLeft":{if(r.isExpanded){r.toggleExpanded();break}const o=r.parentId;if(o)for(i=s-1;u[i].id!==o;)i=i-1;break}case"ArrowRight":if(!r.isExpanded){r.toggleExpanded();break}r.hasChildren&&(i=s+1);break}return u[i].select(),i},[u]);return{visibleList:u,navigateWithKey:K}};export{W as u};
